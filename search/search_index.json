{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"PG LAB Electronics Docs","text":"<p>Welcome to the PG LAB Electronics documentation.</p> <p>From your local network control lights, appliances, irrigation, underfloor heating valves, shutters and covers with PG LAB Electronics devices.</p> <p>These pages describe how to install, configure and control your devices.</p>"},{"location":"#hardware","title":"Hardware","text":"<p>The following devices are currently on sale at PG LAB Electronics Shop. Click the links for a detailed description.</p> <ul> <li>E-BOARD</li> <li>E-RELAY</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Install E-BOARD and E-RELAY on the switchboard, wiring, power ON and how to find  the device IP.</p> <ul> <li>Hardware Requirements</li> <li>Installation</li> <li>Find IP</li> <li>Wiring</li> </ul>"},{"location":"#webui","title":"WebUI","text":"<p>Connect to E-BOARD's local HTTP server to perform configuration or basic use.</p> <ul> <li>Introduction</li> <li>Relay</li> <li>Shutter</li> <li>Network</li> <li>Setting</li> <li>Reboot</li> <li>About</li> <li>Firmware</li> </ul>"},{"location":"#connectivity","title":"Connectivity","text":"<p>The following are the systems available to remote control E-BOARD.</p> <ul> <li>MQTT</li> <li>Home Assistant</li> <li>Python</li> </ul>"},{"location":"#show-case","title":"Show Case","text":""},{"location":"eboard/","title":"E-BOARD","text":""},{"location":"eboard/#description","title":"Description","text":"<p>The E-BOARD is a microcontroller board with I2C and LAN interfaces. It features STM32F103 microcontroller running at 72Mhz. E-BOARD has been designed specifically to use in home automation scenario where a LAN connection is required. E-BOARD uses an on board MPM3610 step down converted which is able to generate the required 3.3 volts from a range of power options. MPM3610 provides up to 1.2A load current across the entire input voltage range of 4.7V to 20V. E-BOARD uses the Ethernet chip controller ENC28J60 to allow a wired Ethernet connection between your E-BOARD and your local network or Internet. This is particularly useful to reduce electromagnetic noise, to be faster, stable and more secure. E-BOARD is IEEE 802.3 compatible. E-BOARD uses 24AA02E48 to provide a unique MAC address for the internet connection.  The firmware can be updated Over the Air (OTA) or reprogramming can be done via the  6 pins Serial Wire Debug (SWD) port. The SWD port can be used to interactively debug coderunning on E-BOARD. The E-BOARD is intended to be mounted into a standard switchboard. E-BOARD can work as a stand-alone device or as an accessory to a home automation controller.</p>"},{"location":"eboard/#specification","title":"Specification","text":"<p>The following table shows E-BOARD general specifications.</p> Feature Details Recommended Input Voltage 12 VDC Permissible Voltage Range 9 - 20 VDC MPU ARM Cortex M3, STM32F103TBU6 72Mhz Flash Memory 8 Mbit Circuit Operating Voltage 3.3 V Communication I2C bus extender, RJ45 Ethernet 10 Mbps Protection ESD, transient on DC input and ports Protection Rate IP20 Certifications CE, RoHs"},{"location":"eboard/#mechanical-information","title":"Mechanical Information","text":"Installation Mounting Type 35 mm DIN rail mountable Mounting Width 2 spacing units wide Supply Voltage Standard Input Voltage 12 VDC Supply Current Min. 7mA Permissible Voltage Range 9 - 20 VDC Protection Transient protected"},{"location":"eboard/#functional-overview","title":"Functional Overview","text":"<p>E-BOARD Product View</p> Ref. Description 1a Power Supply Terminal 1b Power LED 1c Status LED 1d Reset Button 1e Ethernet Port 1f I2C Port"},{"location":"eboard/#mechanical-information_1","title":"Mechanical Information","text":"<p>E-BOARD outline (dimensions in mm).</p> Description Value Mounting Type 35 mm DIN Rail Mountable Mounting Width 2 Spacing Units Wide Width 35 mm Height 98 mm Depth 32 mm Weight 53.6 gr"},{"location":"eboard/#operation-conditions","title":"Operation Conditions","text":"<p>E-BOARD must operate under the following conditions.</p> Description Min. Max. Input Voltage 9 V 20 V Ambient Temperature 0 \u00b0C 55 \u00b0C Humidity Non-Condensing Avoid Icing Protection Rating IP20"},{"location":"eboard/#i2c-connector","title":"I2C Connector","text":"<p>I2C Bus Connector</p> Pin Description 1 +3.3 V 2 GROUND 3 SDA 4 SCL <p>The E-BOARD I2C connector is a 4 pin JST 2.0mm pitch. The I2C connector is used to create the daisy chain from E-BOARD to other devices. </p> <p>Note: The I2C BUS cable must have a maximum length of 30 cm to improve reliability.</p>"},{"location":"eboard/#board-topology","title":"Board Topology","text":"<p>E-BOARD Circuit Top View</p> Ref. Description J1 Input Voltage Screw Terminal J2 I2C, 4 pin JST J3 RJ45  Connector J4 SWD Pin Header L1 Power Red LED L2 Status Green LED S1 Reset Button U1 Step Down Converter MPM3610GQV U2 I2C I/O Bus Expander PCF8574 U3 Microcontroller STM32F103TBU6 U4 Ethernet Controller ENC28J60 U5 Flash Memory SST25VF080B"},{"location":"eboard/#wiring-diagram","title":"Wiring Diagram","text":"<p>E-BOARD connected to E-RELAY</p>"},{"location":"eboard/#setup-and-use","title":"Setup and Use","text":"<p> Important Before beginning the installation, please read carefully and completely the documentation. Failure to follow recommended procedures could lead to malfunction, danger to your life or violation of the law. PG LAB Electronics is not responsible for any loss or damage in case of incorrect installation or operation of this device!</p> <p> Warning Do not allow children to play with the device. Keep the device away from children.</p> <p> Warning Be sure to use the correct power supply and connect the positive and negative wires with the correct polarity. Failure to follow the recommendation can seriously damage the E-BOARD device.</p> <p> Caution Use the E-BOARD/E-RELAY devices only with appliances which comply with all applicable regulations. A short circuit in any appliance connected to the E-BOARD/E-RELAY may damage the device.</p> <p> Caution Do not connect E-BOARD/E-RELAY to appliances exceeding the given maximum load!</p> <p> Caution Connect the E-BOARD only in the way shown in these instructions. Any other method could cause damage and/or injury.</p> <p> Important E-BOARD/E-RELAY is a power device for users who are experienced around, and knowledgeable about high AC Voltage. There is danger of electrocution. Mounting the E-BOARD/E-RELAY device to the power grid has to be performed with caution. The mounting/installation of E-BOARD/E-RELAY should be done by a qualified person (electrician).</p> <p> Important  Even when the E-BOARD/E-RELAY is turned off, it is possible to have high voltage across the screw terminals. Every change in the connection of the wires connected to the screw terminals must be done after ensuring all local power is powered off/disconnected.</p> <p> Caution  Do not install the E-BOARD where it can get wet!</p> <p> Caution  Do not use the E-BOARD if it has been damaged!</p> <p> Caution  Do not attempt to service or repair the E-BOARD yourself!</p>"},{"location":"eboard/#certification","title":"Certification","text":"<p>PG LAB Electronics declare under sole responsibility that the product above is in conformity with the essential requirements of the following EU Directives and therefore qualify for free movement within markets comprising the European Union (EU) and European Economic Area (EEA).</p> <p>Enclosure, conforms to:</p> <ul> <li>UL94</li> </ul> <p>ROHS, conforms to:</p> <ul> <li>IEC 62321</li> </ul> <p>Emission, conforms to:</p> <ul> <li>EN 55016-2-3:2017 /A1:2019</li> <li>EN 55016-2-1:2014 /A1:2017</li> </ul> <p>Immunity, conforms to:</p> <ul> <li>EN 61000-4-2: 2009</li> <li>EN IEC 61000-4-3:2020</li> <li>EN 61000-4-3:2006 /A1:2008 /IS1:2009 /A2:2010</li> <li>EN 61000-4-4: 2012</li> <li>EN 61000-4-5:2014 /A1:2017</li> <li>EN 61000-4-6: 2014</li> <li>EN 61000-4-8: 2010</li> </ul>"},{"location":"erelay/","title":"E-RELAY","text":""},{"location":"erelay/#description","title":"Description","text":"<p>The E-RELAY is a power board device that has been designed for switching eight high powered loads from your E-BOARD.  The E-RELAY has eight individual Panasonic relays rated up to 5 Amps per channel at 250VAC. Each channel is optically isolated, has its own LED and screw terminals with NO (Normally Open) clean contacts. Varistors are present on the screw terminals. This is to protect E-RELAY circuitry from high voltage spikes when switching inductive loads. At the heart of the E-RELAY is an PCF8574 that takes I2C commands to toggle the eight relay outputs. The I2C address of the E-RELAY is configurable by a 3 way Header Pin. This allows a single E-BOARD to control a daisy chain of up to 8 E-RELAY devices. This means a single E- BOARD can control up to 64 high voltage loads.</p> <p>E-RELAY includes safety precautions on the PCB: wide traces for high amperage and ground isolation between the relay and other circuitry.</p> <p>E-RELAY is a power device for users who are experienced around, and knowledgeable about high AC voltage. The E-RELAY is intended to be mounted into a standard switchboard. E-BOARD together with E-RELAY are designed to work with your home automation.</p>"},{"location":"erelay/#specification","title":"Specification","text":"<p>The following table shows E-RELAY general specifications.</p> Feature Details Recommended Input Voltage 12 VDC Permissible Voltage Range 9 - 20 VDC Outputs 8x Relays, Normally Open (NO) Max 10 A Circuit Operating Voltage 3.3/5.0 VDC Communication I2C with P82B715DR bus extender Relay Control with PCF8574 on I2C Protection ESD, transient on DC input and ports Protection Rate IP20 Certifications CE, RoHs <p>The output terminal contacts of E-RELAY are protected by Varistors to avoid high voltage spikes when switching inductive load. </p> <p>Warning</p> <p>E-RELAY does not have a terminal output protection from short circuits. An external fuse on the terminal output is needed to prevent damage to E-RELAY from a short circuit load.</p>"},{"location":"erelay/#relay-information","title":"Relay Information","text":"Relays N\u00b0 of Relays 8 Type Normally Open (NO) ID Panasonic ALQ305 Expected Life Min. 10^7 cycles (at 180 times/min.) Switching Voltage AC Max 250 VAC Switching Voltage DC Max 30 VDC Switching Current AC Max 10 A (125V AC) Switching Current AC Max 5 A  (250V AC) Switching Current DC Max 5 A  (30V DC) Operate Time (at 20\u00b0C) 20 mS Release Time (at 20\u00b0C) 20 mS Terminal Protection With Varistor Short Circuit Protection External fuse required"},{"location":"erelay/#mechanical-information","title":"Mechanical Information","text":"Installation Mounting Type 35 mm DIN rail mountable Mounting Width 6 spacing units wide Supply Voltage Standard Input Voltage 12 VDC Supply Current Min. 10mA all relays OFF Supply Current Max. 200mA all relays ON Permissible Voltage Range 9 - 20 VDC Protection Transient protected"},{"location":"erelay/#functional-overview","title":"Functional Overview","text":"<p>E-RELAY Product View</p> Ref Description 1a I2C Bus Ports 1b Address Header Pins 1c Power LED 1d Relay Status LEDs 1e Output Terminals 1f Power Supply Terminal <p>The Header Pin 1b is used to set the I2C address for the E-RELAY device. All E-RELAY devices connected to the same I2C daisy chain must have a unique I2C address. The following table shows how to place the Jumper Connectors to set the I2C address (ON - jumper present, OFF - jumper not present).   Example: Jumper connector only on ADDR A0 pin set E-RELAY to have a relays index mapping between 8 and 15. </p> <p>ADDR</p> <p>I2C   Address</p> <p>Relay Mapping</p> <p>A2</p> <p>A1</p> <p>A0</p> <p>OFF</p> <p>OFF</p> <p>OFF</p> <p>64 (decimal)</p> <p>0-7</p> <p>OFF</p> <p>OFF</p> <p>ON</p> <p>66 (decimal)</p> <p>8-15</p> <p>OFF</p> <p>ON</p> <p>OFF</p> <p>68 (decimal)</p> <p>16-23</p> <p>OFF</p> <p>ON</p> <p>ON</p> <p>70 (decimal)</p> <p>24-31</p> <p>ON</p> <p>OFF</p> <p>OFF</p> <p>72 (decimal)</p> <p>32-39</p> <p>ON</p> <p>OFF</p> <p>ON</p> <p>74 (decimal)</p> <p>40-47</p> <p>ON</p> <p>ON</p> <p>OFF</p> <p>76 (decimal)</p> <p>48-55</p> <p>ON</p> <p>ON</p> <p>ON</p> <p>78 (decimal)</p> <p>56-63</p>"},{"location":"erelay/#mechanical-information_1","title":"Mechanical Information","text":"<p>E-RELAY outline (dimensions in mm).</p> Description Value Mounting Type 35 mm DIN Rail Mountable Mounting Width 6 Spacing Units Wide Width 105 mm Height 98 mm Depth 32 mm Weight 205.7 gr"},{"location":"erelay/#operation-conditions","title":"Operation Conditions","text":"<p>E-RELAY must operate under the following conditions.</p> Description Min. Max. Input Voltage 9 V 20 V Ambient Temperature 0 \u00b0C 55 \u00b0C Humidity Non-Condensing Avoid Icing Protection Rating IP20"},{"location":"erelay/#i2c-connector","title":"I2C Connector","text":"<p>I2C Bus Connector</p> Pin Description 1 +3.3 V 2 GROUND 3 SDA 4 SCL <p>E-RELAY has two I2C connectors, both are equivalent. The connector is a 4 pin JST 2.0mm pitch. The I2C connectors are used to create the daisy chain to connect the E-BOARD with different E-RELAY devices. The daisy chain can connect up to 8 E-RELAY's to 1 E-BOARD device. </p> <p>Note: E-RELAY must have a unique I2C address, please set Header Pins. Note: To improve reliability each I2C BUS cable must have a length of 30 cm max.</p>"},{"location":"erelay/#board-topology","title":"Board Topology","text":"<p>E-RELAY Circuit Top View</p> Ref. Description J1, J2 4 pin JST connector J3 Input Voltage Screw Terminal J4, J7 Output Screw Terminal A0 Pin Header for I2C Address L0 Power Red LED U0 I2C Bus Extender U1 I2C I/O Bus Expander PCF8574 U2 Linear Voltage Regulator 5V to 3.3V U3 Switching Voltage Regulator 12V to 5V S0, S7 Ophto-couplers and status led R0, R7 Power Relays V0, V7 Varistors"},{"location":"erelay/#wiring-diagram","title":"Wiring Diagram","text":"<p>E-RELAY connected with a load</p> <p></p> <p>E-RELAY connected to E-BOARD</p>"},{"location":"erelay/#setup-and-use","title":"Setup and Use","text":"<p> Important Before beginning the installation, please read carefully and completely the documentation. Failure to follow recommended procedures could lead to malfunction, danger to your life or violation of the law. PG LAB Electronics is not responsible for any loss or damage in case of incorrect installation or operation of this device!</p> <p> Warning Do not allow children to play with the device. Keep the device away from children.</p> <p> Warning Be sure to use the correct power supply and connect the positive and negative wires with the correct polarity. Failure to follow the recommendation can seriously damage the E-RELAY device.</p> <p> Caution Use the E-BOARD/E-RELAY devices only with appliances which comply with all applicable regulations. A short circuit in any appliance connected to the E-BOARD/E-RELAY may damage the device.</p> <p> Caution Do not connect E-BOARD/E-RELAY to appliances exceeding the given maximum load!</p> <p> Caution Connect the E-RELAY only in the way shown in these instructions. Any other method could cause damage and/or injury.</p> <p> Important E-BOARD/E-RELAY is a power device for users who are experienced around, and knowledgeable about high AC Voltage. There is danger of electrocution. Mounting the E-BOARD/E-RELAY device to the power grid has to be performed with caution. The mounting/installation of E-BOARD/E-RELAY should be done by a qualified person (electrician).</p> <p> Important  Even when the E-BOARD/E-RELAY is turned off, it is possible to have high voltage across the screw terminals. Every change in the connection of the wires connected to the screw terminals must be done after ensuring all local power is powered off/disconnected.</p> <p> Caution  Do not install the E-RELAY where it can get wet!</p> <p> Caution  Do not use the E-RELAY if it has been damaged!</p> <p> Caution  Do not attempt to service or repair the E-RELAY yourself!</p>"},{"location":"erelay/#certification","title":"Certification","text":"<p>PG LAB Electronics declare under sole responsibility that the product above is in conformity with the essential requirements of the following EU Directives and therefore qualify for free movement within markets comprising the European Union (EU) and European Economic Area (EEA).</p> <p>Enclosure, conforms to:</p> <ul> <li>UL94</li> </ul> <p>ROHS, conforms to:</p> <ul> <li>IEC 62321</li> </ul> <p>Emission, conforms to:</p> <ul> <li>EN 55016-2-3:2017 /A1:2019</li> <li>EN 55016-2-1:2014 /A1:2017</li> </ul> <p>Immunity, conforms to:</p> <ul> <li>EN 61000-4-2: 2009</li> <li>EN IEC 61000-4-3:2020</li> <li>EN 61000-4-3:2006 /A1:2008 /IS1:2009 /A2:2010</li> <li>EN 61000-4-4: 2012</li> <li>EN 61000-4-5:2014 /A1:2017</li> <li>EN 61000-4-6: 2014</li> <li>EN 61000-4-8: 2010</li> </ul>"},{"location":"find-ip/","title":"Find Device IP","text":"<p>When powering E-BOARD negotiate the IP address with your router using DHCP. To perform the initial configuration you need to connect to E-BOARD with a host computer.</p> <p>Here are some tips to help find E-BOARD IP address:</p> <ol> <li>Be sure that all E-BOARD devices are connected to the router/switcher and your computer is connected to the same network.</li> <li>If possible, disconnect all other devices that share the same network so that only your computer and E-BOARD with unknown IP are on the same network.</li> <li>Scan or find the IP address within the subnet.</li> </ol> <p>Note</p> <p>Save the IP address of E-BOARD for future reference.</p>"},{"location":"find-ip/#on-your-router","title":"On Your Router","text":"<p>Connect to the Router with a host computer, you should be able to see the list of all attached devices. E-BOARD has a name similar to: </p> <pre><code>E-BOARD-AE20B315\n</code></pre> <p>Take a note of the corresponding IP address.</p> <p>Info</p> <p>To access your router please refer to the router manufacture documentation.</p>"},{"location":"find-ip/#on-macoslinux","title":"On MacOS/Linux","text":"<p>Open a terminal and run:</p> <pre><code>$ sudo nmap -sn 192.168.1.*\n</code></pre> <p>The command scans a range of IP addresses on the 192.168.x subnet. The output should look similar to:</p> <pre><code>Starting Nmap 7.95 ( https://nmap.org ) at 2025-01-15 22:40 CET\nNmap scan report for 192.168.1.1\nHost is up (0.00029s latency).\nMAC Address: 3C:37:86:19:56:16 (Netgear)\nNmap scan report for 192.168.1.7\nHost is up (0.0026s latency).\nMAC Address: 80:34:28:1B:79:84 (Microchip Technology)\nNmap scan report for 192.168.1.26\nHost is up (0.0054s latency).\nMAC Address: FC:0F:E7:D8:24:E7 (Microchip Technology)\nNmap scan report for 192.168.1.13\nHost is up.\nNmap done: 256 IP addresses (3 hosts up) scanned in 2.09 seconds\n</code></pre> <p>In this case E-BOARD has an IP 192.168.1.7 and IP 192.168.1.26. While the network adapter of the host computer is 192.168.1.13.</p>"},{"location":"find-ip/#on-windows","title":"On Windows","text":"<p>We recommend installing the latest version of nmap that comes with a graphical interface. Download and install the latest stable release self-installer from nmap.org. On your desktop click and execute as administrator the Nmap-Zenmap GUI.  In the Command field type nmap -sn 192.168.1.* </p> <p></p> <p>Hit Enter on your keyboard, after few seconds the output should look similar to:</p> <pre><code>Starting Nmap 7.95 ( https://nmap.org ) at 2025-01-15 22:40 CET\nNmap scan report for 192.168.1.1\nHost is up (0.00029s latency).\nMAC Address: 3C:37:86:19:56:16 (Netgear)\nNmap scan report for 192.168.1.7\nHost is up (0.0026s latency).\nMAC Address: 80:34:28:1B:79:84 (Microchip Technology)\nNmap scan report for 192.168.1.26\nHost is up (0.0054s latency).\nMAC Address: FC:0F:E7:D8:24:E7 (Microchip Technology)\nNmap scan report for 192.168.1.13\nHost is up.\nNmap done: 256 IP addresses (3 hosts up) scanned in 2.09 seconds\n</code></pre> <p>In this case E-BOARD has an IP 192.168.1.7 and IP 192.168.1.26. While the network adapter of the host computer is 192.168.1.13.</p>"},{"location":"installation/","title":"Installation","text":"<p> Warning Danger of electrocution. Mounting/installation of E-BOARD/E-RELAY devices to the power grid has to be performed with caution, by a qualified electrician!</p> <p> Warning Danger of electrocution. Every change in the connections have to be done after ensuring there is no voltage present at E-RELAY terminals!</p> <p> Caution Use E-BOARD/E-RELAY devices only with appliances which comply with all applicable regulations. A short circuit in any appliance connected to the E-BOARD/E-RELAY may damage the device.</p> <p> Caution Do not connect E-RELAY to appliances exceeding the given maximum load!</p> <p> Caution Connect E-BOARD/E-RELAY only in the way shown in these instructions. Any other method could cause damage and/or injury!</p> <p> Caution Do not use E-BOARD/E-RELAY if it has been damaged!</p> <p> Caution Do not attempt to service or repair E-BOARD/E-RELAY yourself!</p> <p> Caution Before mounting E-BOARD/E-RELAY, turn the circuit breakers off, and check that there is no voltage on their terminals. This can be done with a phase tester or multimeter. When you are sure that there is no voltage, you can proceed to mounting and wiring E-BOARD/E-RELAY.</p> <p>In your package, you will find the E-BOARD and/or E-RELAY device(s). The devices need to be attached to a standard DIN bar in the switchboard.  Attach E-BOARD and E-RELAY as shown in the Figure 1.1. Be sure that the ethernet port and the black hook of the body enclosure is pointing down. You can use a screw driver to better engage the hook in the DIN bar.</p> <p>Figure 1.1</p> <p>Be sure to connect the power lines respecting the polarity as shown in Figure 1.2. E-RELAY has a double input port to facilitate connecting multiple devices in a daisy chain mode.</p> <p>Figure 1.2</p> <p>Connect the I2C port to the E-RELAY I2C port using the supply 4 pin cable as shown in Figure 1.3. E-RELAY has a double  I2C BUS port to facilitate connecting multiple devices in a daisy chain mode. Use the other I2C port to connect multiple E-RELAY's.</p> <p>Figure 1.3</p> <p>Warning</p> <p>Be sure that there is no voltage on the input power terminal when connecting or disconnecting the I2C cable. E-BOARD does not support hot swapping.</p> <p>Connect E-BOARD to your local network with a Cat5E cable to your router or switcher as shown in the Figure 1.4.</p> <p>Figure 1.4</p>"},{"location":"mqtt/","title":"MQTT","text":"<p>E-BOARD includes support for MQTT (Message Queue Telemetry Transport). MQTT is an ISO standard (ISO/IEC PRF 20922) publish-subscribe based \u201clight weight\u201d messaging protocol for use on top of the TCP/IP protocol. It is designed for connections with remote locations where a \u201csmall code footprint\u201d is required or the network bandwidth is limited.</p> <p>E-BOARD allows control and monitoring over MQTT for both Relay and Shutter output. You can use any software connected to the same MQTT server to control E-BOARD.</p> <p>Notes</p> <p>Go to Network page to setup E-BOARD MQTT server connection.</p> <p>Notes</p> <p>Go to Setting page to set the MQTT QoS (Quality of Service) and the MQTT retain message delivery.</p> <p>To monitor the MQTT server activity we recommend installing the latest version of MQTT-Explorer. Download and install the latest stable release from mqtt-explorer.com. Open MQTT-Explorer client and set all fields to connect to the server as the following picture.</p> <p></p> <p>Click CONNECT. When connected find and expand the topic pglab, you should see something similar to:</p> <p></p> <p>On startup, E-BOARD device connects to MQTT server and immediately publishes a message with the topic pglab/discovery/E-BOARD-[ID]. The message is in JSON format, it can be used to discover all E-BOARD devices connected to the server. In particular, it contains the following information:</p> <p></p> <p>Notes</p> <p>id is the name of the E-BOARD client connected to the MQTT server. It is used to send commands and/or receive updates from E-BOARD. params/shutters is the number of shutters that E-BOARD controls. params/boards is a bit mask of all E-RELAY devices connected to E-BOARD. In the picture, \"11000000\" means that there are two E-RELAY devices connected.</p> <p>From a terminal window of your HOST computer you can control E-BOARD. Download and install the latest stable release of mosquitto from mosquitto.org.</p>"},{"location":"mqtt/#relay-control","title":"Relay Control","text":"<p>Open a terminal window. To turn ON the Relay output 0 run the following command:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/relay/0/set -m ON\n</code></pre> <p>To turn ON the Relay output 3 use the following command:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/relay/3/set -m ON\n</code></pre> <p>To turn OFF both relay outputs run the following commands:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/relay/0/set -m OFF\n$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/relay/3/set -m OFF\n</code></pre> <p>From the command line you can subscribe to every change of relay outputs. For example, if you are interested in Relay output 0 status updates run the following command:</p> <pre><code>$ mosquitto_sub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/relay/0/state\n</code></pre> <p>Use E-BOARD web interface to toggle the Relay output 0. You should see an output on the terminal window similar to:</p> <pre><code>ON\nOFF\n</code></pre>"},{"location":"mqtt/#shutter-control","title":"Shutter Control","text":"<p>From the terminal window you can control shutters. To open Shutter 0 use the following command:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/shutter/0/set -m OPEN\n</code></pre> <p>To close the Shutter 0 use the following command:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/shutter/0/set -m CLOSE\n</code></pre> <p>To stop the Shutter to open or close use the following command:</p> <pre><code>$ mosquitto_pub -h 192.168.1.8 -p 1883 -t pglab/E-BOARD-DD53AC85/shutter/0/set -m STOP\n</code></pre>"},{"location":"mqtt/#mqtt-topics","title":"MQTT Topics","text":"<p>E-BOARD uses the following topics: </p> Topic Value Description pglab/deviceid/relay/index/set ON/OFF turn ON/OFF relay output pglab/deviceid/shutter/index/set OPEN/CLOSE/STOP open or close a shutter pglab/deviceid/relay/index/state ON/OFF report relay output status pglab/deviceid/shutter/index/state OPEN/CLOSE/OPENING/CLOSING report shutter output status pglab/deviceid/sensor/value temp, volt, rtime JSON message that reports: CPU temperature, CPU voltage and time in seconds since last reboot. <p>Notes</p> <p>[deviceid] is E-BOARD setting MQTT ID, see Network page.  [index] can be from 0 to 63 to select a Relay Output or from 0 to 31 to select a Shutter Output.</p>"},{"location":"python/","title":"PYTHON","text":"<p>E-BOARD can be controlled by python with the library pypglab. The library can be used to discover devices, to control relay and shutter outputs and to get status updates.</p> <p>The library is simple to use and can be easily integrated in your personal project. Internally it creates a connection with an MQTT broker to control E-BOARD and receive status updates. The library was created for PG LAB Electronics Home Assistant Integration.  The library pypglab is available on github.</p> <p>From your terminal window run the following command to install the library:</p> <pre><code>pip install pypglab\n</code></pre> <p>The library has a helper class to simplify the discovery and the use of PG LAB Electronics devices. The helper class hides the complexity to setup the MQTT connection with the broker.</p> <p>In the following example, the pyPgLab class connects with the MQTT broker and retrieves a specific E-BOARD device.</p> <pre><code>from pypglab.helper import pyPgLab\n\npglab = pyPgLab()\npglab.start(\"192.168.1.8\")\npglab.connect()\n\ne_board = pglab.get_device_by_name(\"E-BOARD-DD53AC85\")\n\npglab.stop()\n</code></pre> <p>The following is an example of how to print each property of E-BOARD device:</p> <pre><code>print(\"IP address: \" + e_board.ip)\nprint(\"MAC address: \" + e_board.mac)\nprint(\"Device ID: \" + e_board.id)\nprint(\"Device Name: \" + e_board.name)\nprint(\"Device Type: \" + e_board.type)\nprint(\"Device Manufacturer: \"+ e_board.manufacturer)\nprint(\"Hardware Version: \" + e_board.hardware_version)\nprint(\"Firmware Version: \" + e_board.firmware_version)\n</code></pre> <p>In this example, all Relay outputs are turned ON and after a short time are turned OFF:</p> <pre><code>from pypglab.relay import Relay\n...\n\nfor relay in e_board.relays:\n    asyncio.run( relay.turn_on() )\n    time.sleep(0.02)\n    asyncio.run( relay.turn_off() )\n</code></pre> <p>In this example, an open command is sent to the shutter.  It waits until that shutter state change to fully open. Then a close command is sent.</p> <pre><code>from pypglab.shutter import Shutter\n...\n\nfor shutter in e_board.shutters:\n    asyncio.run( shutter.open() )\n    while (not shutter.state is Shutter.STATE_OPEN):\n        time.sleep(1)\n    asyncio.run( shutter.close() )\n    while (not shutter.state is Shutter.STATE_CLOSED):\n        time.sleep(1)\n</code></pre> <p>The following is an example of how to print the state of the internal sensors:</p> <pre><code>from pypglab.const import SENSOR_REBOOT_TIME, SENSOR_TEMPERATURE, SENSOR_VOLTAGE\nfrom pypglab.sensor import Sensor\n...\n\nsensors = e_board.sensors.state\n\nprint(\"MPU Temperature: \" + str(sensors[SENSOR_TEMPERATURE]) + \"[C]\" )\nprint(\"MPU Voltage: \" + str(sensors[SENSOR_VOLTAGE]) + \"[V]\")\nprint(\"Time from last reboot: \" + str(sensors[SENSOR_REBOOT_TIME]) + \"[sec]\" )\n\n</code></pre>"},{"location":"requirements/","title":"Hardware Requirements","text":"<p>You will need:  </p> <ul> <li> <p>One E-BOARD</p> </li> <li> <p>One or more E-RELAY</p> </li> <li> <p>One 12 Volt DIN rail power supply. </p> </li> </ul> <p>The following is our recommendation to power an E-BOARD with one or more E-RELAY devices.</p> Number of E-RELAY Power Supply rating Model from 1 to 4 15W MeanWell HDR-15\u201312, 12V, 1.25A from 4 to 8 30W MeanWell HDR-30\u201312, 12V, 2A <p>Warning</p> <p>Make sure to use a power supply with appropriate voltage and power rating.</p>"},{"location":"webserver-about/","title":"About","text":"<p>From the Home page go to the About page. You should see a page similar to the following picture.</p> <p></p> <p>In the picture you can see the DEVICE INFORMATION as show in this table:</p> Ref. Description ID The device ID. Every E-BOARD has a unique ID Name The device name: E-BOARD Manufacturer PG LAB Electronics Hardware The hardware version of your E-BOARD device Firmware The version of the current firmware Serial E-BOARD serial number IP E-BOARD IP address on your local network MAC The MAC address of E-BOARD MQTT The server MQTT connection status Local Time Local Time according to your time zone CPU Voltage E-BOARD CPU voltage CPU Temperature E-BOARD CPU temperature <p>On the About Page you can also upgrade E-BOARD to the latest available firmware.</p> <p>Please refer to Firmware for further details.</p>"},{"location":"webserver-firmware/","title":"Firmware","text":"<p>E-BOARD supports Over The Air Firmware update (OTA). Updates with the latest Firmware is important to keep up with the latest features and bug fixes.</p> <p>Over The Air Firmware update allows you to remotely update the Firmware of E-BOARD device without the need for physical access.</p> <p>From the Home page go to the About page, you should see a page similar to the following picture.</p> <p></p> <p>In the previous picture you can see various information of the device, such as, current Firmware Version, Serial Number, MQTT server connection, CPU Voltage and Temperature and more.</p> <p>To update the current firmware:</p> <ul> <li>Download from here PG LAB Firmware the latest E-BOARD firmware version</li> <li>On the About page click the button to Choose File and browse to select the new firmware</li> <li>Click UPGRADE button</li> <li>Your browser is now sending the new firmware to E-BOARD</li> </ul> <p>When E-BOARD receives the firmware it proceeds with a CRC check and it overwrites the current firmware with the new one. The Green LED on the E-BOARD blinks rapidly a few times and then the device reboots.</p> <p>This operation should take less than a minute.</p> <p>From your browser, check again the About Page in DEVICE INFORMATION. The Firmware Version should be updated to the latest one.</p> <p>Warning</p> <p>Never disconnect the power during the firmware update.</p>"},{"location":"webserver-firmware/#factory-reset","title":"Factory Reset","text":"<p>E-BOARD stores a safe firmware inside the internal memory. The safe firmware is used if for any reason you want to restore the original factory firmware and to restore the default settings.</p> <p>You have to proceed in the following mode:</p> <ul> <li>Insert a NON conductive stick inside E-BOARD to press down  the Reset button as shown in the following picture</li> <li>Press down and hold the internal button for more than 10 seconds</li> <li>Keep pressing down until the Green LED on the E-BOARD blinks rapidly. This informs the user that E-BOARD is now ready to restore the original firmware</li> <li>Now release the Reset button</li> </ul> <p></p> <p>From your browser, check the About Page in DEVICE INFORMATION to see if the Firmware Version has been updated.</p> <p>Warning</p> <p>Never use a conductive stick to push the Reset button. This can cause an internal short circuit and damage the device.</p> <p>Info</p> <p>If you press down the Reset button once E-BOARD just reboots.</p>"},{"location":"webserver-intro/","title":"Introduction","text":"<p>E-BOARD runs a local HTTP server on port 80. It is a simple web page which allows configuration and a basic use. </p> <p>E-BOARD does not have a built-in real time clock but it will automatically synchronize when connected to a SNTP server. Once the time is synchronized the device can schedule internal operation. The default SNTP server is pool.ntp.org, but a custom server can also be configured.</p> <p>Many configuration settings on E-BOARD are only available over HTTP.  However, E-BOARD supports MQTT and allows real-time control and status update and integration with external systems.</p> <p>E-BOARD does not use the Cloud. Full control of E-BOARD is by the local network. </p> <p>Info</p> <p>E-BOARD does not support HTTPS connection.   From your web browser it is not possible to connect to E-BOARD using an IP address starting with \"https\" for example: https://192.168.1.16.    Always connect using an IP address with \"http\" for example: http://192.168.1.16</p> <p>From a host computer, connect to E-BOARD internal web server using the IP number as the web address. Please see the Find device IP for further details.</p> <p>Open your preferred browser and on the address field type the E-BOARD IP number. For example  http://192.168.1.16</p> <p>You should be able to see the E-BOARD home page similar to the following picture.</p> <p></p> <p>The main page on your browser will show the status of all 64 relays. From the main page you can turn ON or OFF any specific relay. If the status button is green the relay is available and you can toggle the relay status. When the status button is a faded green it means that the specific relay is not connected to E-BOARD.</p>"},{"location":"webserver-network/","title":"Network","text":"<p>Success</p> <p>To have an effective change. Click the SAVE button at the end of the \"Setting\" page and reboot E-BOARD from the \"Reboot\" page.</p> <p>From the Home page go to the Network page. You should see a page similar to the following picture.</p> <p></p> <p>The Network page allows you to:</p> <ul> <li>Setup the IP connection</li> <li>Setup the SNTP server</li> <li>Setup the MQTT connection</li> </ul> <p>To setup the IP connection you can use DHCP or set a Static IP. The default value is to use DHCP.</p> <p>The following table shows the available settings:</p> Ref. Description DHCP Client When enable, E-BOARD uses Dynamic IP IP Address Set E-BOARD static IP address Network Mask Set the static network mask Gateway Set the static gateway DNS Set the static DNS <p>The SNTP server address synchronizes the E-BOARD internal time. Once the time is synchronized the E-BOARD can schedule internal operations. At every hour E-BOARD synchronizes the system time with the SNTP server.</p> <p>The following table shows the available setting:</p> Ref. Description SNTP Server address to synchronize the system time <p>Info</p> <p>To verify that the E-BOARD system time has been updated check the Device Information on the About page.</p> <p>E-BOARD allows control and status updates over MQTT for both Relay and Shutter outputs.</p> <p>To setup the client MQTT connection use the following configuration setting:</p> Ref. Description Server Set MQTT server address Port Set MQTT server port Username Set Username to connect to MQTT server Password Set Password to connect to MQTT server MQTT ID Set MQTT ID E-BOARD name <p>Important</p> <p>It is recommended to use a friendly name in the MQTT ID setting. For example: E-BOARD-Garden.</p> <p>Info</p> <p>The MQTT ID name must be unique between all devices with active connections to the MQTT server.</p> <p>Info</p> <p>Check the Device Information on the About page to verify that E-BOARD is connected to the MQTT server.</p>"},{"location":"webserver-reboot/","title":"Reboot","text":"<p>From the Home page go to the Reboot page. You should see a page similar to the following picture.</p> <p></p> <p>The page is used to reboot E-BOARD. When settings have been changed E-BOARD requires a reboot in order to register the new settings.</p> <p>Clicking on the REBOOT button does the following: </p> <ul> <li>All relay outputs are turned OFF</li> <li>The Green LED on the E-BOARD blinks rapidly a few times</li> <li>The device reboots</li> </ul> <p>After a few seconds E-BOARD is ready again.</p> <p>Note</p> <p>Always reboot after the settings have been changed by the user.</p>"},{"location":"webserver-relay/","title":"Relay","text":"<p>Success</p> <p>To have an effective change. Click the SAVE button at the end of the \"Setting\" page and reboot E-BOARD from the \"Reboot\" page.</p> <p>E-BOARD can operate two distinct device types at the same time:</p> <ul> <li>Relay  </li> <li>Shutter (bi-directional AC motor)</li> </ul> <p>E-BOARD default configuration is to use Relay only.</p> <p>A Relay output is controlled individually and supports the ON and OFF commands. You can use E-BOARD internal web-server to toggle the Relay status.</p> <p>From the Home page click the \"Relay0\" OFF button.  It should do the following:</p> <ul> <li>Turn ON the terminal output</li> <li>Turn ON the status LED on the E-RELAY </li> <li>The Home page should update as the following picture</li> </ul> <p></p> <p>Relay output can also be controlled by MQTT messages. Please see MQTT for further details.</p> <p>On the Setting page you can find:</p> <ul> <li>Auto_OFF setting</li> <li>Relay_Auto_OFF setting</li> <li>Max_ON setting</li> </ul> <p>Relay output supports Auto_OFF setting. This is a timer in seconds which will turn OFF the output. The user can set a limit for how long the output is ON. The timer can be global or individual for each Relay output.</p> <p>Relay output supports Relay_Auto_OFF setting. This is a timer in seconds for all 64 individual Relays. It indicates for how long the Relay output is ON. With this setting the user can configure each individual Relay.  With a zero value it uses the setting of Auto_OFF by default.</p> <p>Example</p> <p>How to set Relay5 output to 12 seconds ON before to turn OFF. </p> <p>Go to the \"Setting\" page. From the dropdown menu of Relay_Auto_OFF select the index to 5 and set the value to 12.  As shown in the following picture. </p> <p>Relay output also supports Max_ON setting. This is the number of Relay outputs that can be ON at the same time. This setting can be used to prevent power overload of the connected load on the output terminals.</p> <p>When you power-on E-BOARD all the Relay outputs are initialized OFF.</p> <p>Please see Setting for further details.</p>"},{"location":"webserver-setting/","title":"Setting","text":"<p>Success</p> <p>To have an effective change. Click the SAVE button at the end of the \"Setting\" page and reboot E-BOARD from the \"Reboot\" page.</p> <p>From the Home page go to the Setting page. You should see a page similar to the following picture.</p> <p></p> <p>This page contains settings for:</p> <ul> <li>Timezone and Daylight Saving Time (DST)</li> <li>Safe control of the Relay outputs</li> <li>Reboot</li> <li>Relay and Shutter output times</li> </ul> <p>To set E-BOARD time zone and the daylight saving time use the setting as shown in the following table:</p> Ref. Description Timezone Set to your time zone in respect to UTC (Coordinated Universal Time). DST/STD Week Set the week number of the month to start daylight saving time (DST) and to return to the standard time (STD). Set the field to NEVER to disable this feature. DST/STD Day Set the day of the week to start DST and return to STD. DST/STD Month Set the month of the year to start DST and return to STD. DST/STD Hours Set the hour of the day to start DST and return to STD. <p>The following settings are used as safety mechanism in the way E-BOARD controls the Relay outputs.</p> Ref. Description Auto OFF A timeout in seconds. E-BOARD automatically turns OFF all Relay terminal outputs that have been ON for more than the set time. Set the field to zero to disable this feature. Max ON This is the maximum number of Relay outputs that can be ON at the same time. MQTT QoS Set the Quality of Service level of the message sent to MQTT server. MQTT retain Select the checkbox to retain the last sent message to the MQTT server. MQTT lost Select the checkbox to turn off all relays when the MQTT connection with the server is lost. <p>Note</p> <p>The Auto_OFF setting is useful in an irrigation system setup to prevent an electro-valve staying open for too much time or to never close. For example, this can happen if the user forget to turn OFF the Relay output or if the connection with MQTT server is lost. In a critical scenario it is highly recommended to set this value.</p> <p>Note</p> <p>The Max_On setting is useful to limit the number of devices connected to E-RELAY that can be ON at the same time. This helps to prevent overload.</p> <p>Note</p> <p>The MQTT_lost setting is useful to turn OFF the Relay outputs when the MQTT server connection is lost. This prevents loads from continuing to run. In a critical scenario it's highly recommended to set this value</p> <p>E-BOARD has an auto reboot feature. It is recommended to use this feature to increase the stability of E-BOARD over time. The available settings are:</p> Ref. Description Auto REBOOT Set E-BOARD auto reboot at a specific day. Possible values are EveryDay, or a specific day of the week. Set the field to NEVER to disable this feature. REBOOT hours Set the time in hours and minutes when to reboot E-BOARD. <p>The following settings are used to set the Shutter outputs and to set the timing for opening and closing the shutter bi-directional AC motor.</p> Ref. Description Shutter Controls This value is the number of shutters that E-BOARD can control. When set to zero no relay output is reserved for controlling shutters. Shutter Time Set a time in seconds for opening and closing the shutter. <p>Note</p> <p>The Shutter_Time setting is a global time for all shutters. To set each individual shutter use Relay_Auto_OFF.</p> <p>Note</p> <p>The two relay outputs that control a shutter always start from the Index 0. The first Relay output (Index 0) to open and the second Relay output (Index 1) to close.</p> <p>For example, in a scenario with 3 shutters set  Shutter_Controls  to the value 3. E-BOARD now reserves relay outputs from 0 to 5 to control the 3 shutters. E-BOARD uses the relay outputs 0, 2, 4 for opening and the relay outputs 1, 3, 5 for closing. Please see Wiring for further details.</p> <p>The Relay_Auto_OFF allows you to set the timing of each individual Relay output. This overrides the global setting Auto_OFF. From the dropdown menu of Relay_Auto_OFF select the Relay index output (0 to 64) and then set the value in seconds. You can control when to automatically turn OFF each individual Relay output.</p> Ref. Description Relay_Auto_OFF Sets the auto off time in seconds for a specific Relay output. <p>Note</p> <p>The Relay_Auto_OFF for Shutter output defines the opening/closing time in seconds. When set to zero it uses the global setting  Shutter_Time .</p> <p>Note</p> <p>The Relay_Auto_OFF for Relay outputs defines the auto off time in seconds. When set to zero it uses the global setting  Auto_OFF .</p>"},{"location":"webserver-shutter/","title":"Shutter","text":"<p>Success</p> <p>To have an effective change. Click the SAVE button at the end of the \"Setting\" page and reboot E-BOARD from the \"Reboot\" page.</p> <p>E-BOARD can operate two distinct device types at the same time:</p> <ul> <li>Relay  </li> <li>Shutter (bi-directional AC motor)</li> </ul> <p>E-BOARD default configuration is to use Relay only.</p> <p>To control one or more shutters you have to set Shutter_Controls. </p> <p>From the Home page go to the Setting page and change Shutter_Controls with the number of shutter(s) that you need to control.</p> <p>For example:</p> <p></p> <p>The home page should change as the following picture.</p> <p></p> <p>One Shutter output always uses two physical relays.</p> <p>For example Shutter0 uses Relay0 and Relay1 terminal output.</p> <ul> <li>Relay0 is used to power the AC shutter motor in one direction (opening). </li> <li>Relay1 is used to power the AC shutter motor in the other direction (closing). </li> <li>E-BOARD guarantees that the two terminal outputs   of a shutter are never ON at the same time.</li> </ul> <p>A Shutter output is controlled individually and supports the OPEN, CLOSE, STOP commands. You can use E-BOARD internal webserver to command a shutter. You can open/close independently any number of shutters.</p> <p> From the Home page click the Shutter0 OPEN button. This turns ON the terminal output to power the shutter motor in one direction, it turns ON the Relay0 status LED and after the set time the output automatically turns OFF.</p> <p> When clicking the Shutter0 CLOSE button. This turns ON the terminal output to power the shutter motor in the opposite direction, it turns ON the Relay1 status LED and after the set time the output automatically turns OFF.</p> <p> When the shutter is opening or closing, you can always stop the shutter by clicking the STOP button. This turns OFF the terminal outputs of Relay0 and Relay1.</p> <p>Shutter output can be controlled also by MQTT messages. Please see MQTT for further details.</p> <p>On the Setting page you can find:</p> <ul> <li>Shutter_Time setting</li> <li>Relay_Auto_OFF setting</li> </ul> <p>Shutter output supports Shutter_Time setting. This is a two value timer in seconds. The opening value is for how long the opening Relay terminal is ON. The closing value is for how long the closing Relay terminal is ON.</p> <p>Example</p> <p>How to set the default shutter opening and closing time to 20 seconds each. </p> <p>Go to the \"Setting\" page. Set Shutter_Time opening value to 20 and then set the closing value to 20.  As shown in the following picture. </p> <p>Shutter output supports Relay_Auto_Off setting. This is a timer in seconds for all 64 individual relays. It indicates the time in seconds the Relay output is ON. With this setting the user can set the opening and closing time for each individual shutter. With a zero value it uses the setting of Shutter_Time by default.</p> <p>Example</p> <p>How to set Shutter0 to a 20 second opening and 10 second closing.</p> <p>Go to the \"Setting\" page. From the dropdown menu of Relay_Auto_OFF select the index 0 and set the value to 20.  Then from the dropdown menu of Relay_Auto_OFF select the index 1 and set the value to 10.  As shown in the following table.</p> Relay index Value[sec] 0 20 1 10 <p>Example</p> <p>How to set Shutter1 to 22 seconds opening and 12 seconds closing.</p> <p>Go to the \"Setting\" page. From the dropdown menu of Relay_Auto_OFF select the index 2 and set the value to 22.  Then from the dropdown menu of Relay_Auto_OFF select the index 3 and set the value to 12.  As shown in the following table.</p> Relay index Value[sec] 2 22 3 12 <p>Please see Setting for further details.</p>"},{"location":"wiring/","title":"Wiring","text":"<p>The following picture shows how to wire a standard shutter motor with electronics limit switch to E-RELAY.</p> <p></p>"}]}